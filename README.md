# üìö Arcnote_Bot

Telegram-–±–æ—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å—Å—ã–ª–∫–∞—Ö (—Å—Ç–∞—Ç—å–∏, –≤–∏–¥–µ–æ, —Ä–µ—Å—É—Ä—Å—ã) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

## ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–º–∞—Ç–∏–∫–∏ –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ YouTube, GitHub, Habr, Medium –∏ –¥—Ä.
- ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–ª–æ–∂–∏—Ç—å
- ‚úÖ –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ summary
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–º–∞–º –∏ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ—Å—Ç–∏

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–Ø–∑—ã–∫**: Python 3.10+
- **–§—Ä–µ–π–º–≤–æ—Ä–∫ –±–æ—Ç–∞**: `aiogram`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**: `apscheduler`
- **–î–æ–ø. –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
  - `newspaper3k` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏
  - `langdetect` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
  - `asyncpg` ‚Äî PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
  - `psycopg2` ‚Äî –¥–ª—è CLI –∏ –º–∏–≥—Ä–∞—Ü–∏–π

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

project/
‚îÇ
‚îú‚îÄ‚îÄ bot.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ handlers/
‚îÇ ‚îú‚îÄ‚îÄ add_link.py # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
‚îÇ ‚îú‚îÄ‚îÄ search.py # –ü–æ–∏—Å–∫ –ø–æ summary
‚îÇ ‚îú‚îÄ‚îÄ reminders.py # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏
‚îÇ ‚îî‚îÄ‚îÄ list_links.py # –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ ‚îú‚îÄ‚îÄ link_parser.py # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞
‚îÇ ‚îú‚îÄ‚îÄ summarizer.py # –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ —Ç–µ–∫—Å—Ç–∞
‚îÇ ‚îú‚îÄ‚îÄ language.py # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞
‚îÇ ‚îî‚îÄ‚îÄ scheduler.py # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ db/
‚îÇ ‚îú‚îÄ‚îÄ connection.py # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ ‚îî‚îÄ‚îÄ queries.py # SQL-–∑–∞–ø—Ä–æ—Å—ã
‚îÇ
‚îú‚îÄ‚îÄ schema.sql # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ requirements.txt


---

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### üìÑ `users`

| –ü–æ–ª–µ         | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ           |
|--------------|------------|--------------------|
| id           | SERIAL     | PK                 |
| telegram_id  | BIGINT     | Telegram ID        |
| username     | TEXT       | –õ–æ–≥–∏–Ω              |
| first_name   | TEXT       | –ò–º—è                |
| last_name    | TEXT       | –§–∞–º–∏–ª–∏—è            |
| created_at   | TIMESTAMP  | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏   |

---

### üìÑ `links`

| –ü–æ–ª–µ          | –¢–∏–ø         | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|---------------|-------------|-----------------------------------|
| id            | SERIAL      | PK                                |
| user_id       | INTEGER     | FK ‚Üí users(id)                    |
| url           | TEXT        | –°—Å—ã–ª–∫–∞                            |
| title         | TEXT        | –ó–∞–≥–æ–ª–æ–≤–æ–∫                         |
| topic         | TEXT        | –¢–µ–º–∞—Ç–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)    |
| subcategory   | TEXT        | –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: A/B)      |
| summary       | TEXT        | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                  |
| resource_type | TEXT / ENUM | –¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞ (youtube, article‚Ä¶)   |
| lang          | VARCHAR(10) | –Ø–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞ ('ru', 'en', ...)     |
| tsv_summary   | TSVECTOR    | –ò–Ω–¥–µ–∫—Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞     |
| created_at    | TIMESTAMP   | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è                   |

---

### üìÑ `reminders`

| –ü–æ–ª–µ       | –¢–∏–ø        | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|------------|------------|-----------------------------------|
| id         | SERIAL     | PK                                |
| link_id    | INTEGER    | FK ‚Üí links(id)                    |
| remind_at  | TIMESTAMP  | –í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è                 |
| sent       | BOOLEAN    | –ë—ã–ª–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ                |
| created_at | TIMESTAMP  | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–æ                     |

---

## üì• –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### `/start`
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

### `/add <url> [—Ç–µ–º–∞—Ç–∏–∫–∞] [–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è]`
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Å—ã–ª–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä:
/add https://habr.com/post/abc –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ AB


---

### `/list [—Ç–µ–º–∞—Ç–∏–∫–∞]`
–°–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ (–ø–æ —Ç–µ–º–∞—Ç–∏–∫–∞–º –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º).

–ü—Ä–∏–º–µ—Ä:
/list –∞–Ω–∞–ª–∏—Ç–∏–∫–∞


---

### `/remind`
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å—Å—ã–ª–∫–µ.

---

### `/search <–∑–∞–ø—Ä–æ—Å>`
–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏—è–º —Å —É—á—ë—Ç–æ–º —è–∑—ã–∫–∞.

---

## üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å                   | –î–µ—Ç–∞–ª–∏                                |
|------------------------------|----------------------------------------|
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞     | `langdetect`                           |
| –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è       | `newspaper3k`                          |
| –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è                | —Ç–µ–º–∞ / –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è                   |
| –ü–æ–∏—Å–∫                        | PostgreSQL `tsvector + GIN index`     |
| –¢–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤                | YouTube / GitHub / Article / Other    |

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/yourname/link-bot.git
cd link-bot

python3 -m venv venv
source venv/bin/activate

pip install -r requirements.txt
psql -U postgres -d yourdb -f schema.sql

python bot.py
```